# -*- mode: yaml -*-
manifest:
  version: 1.0
automations:
  auto_approve_safe_changes:
    if:
      - {{ files | allDocs | some }}
      - {{ files | allTests | some }}
    run:
      - action: approve@v1
        args:
          message: "Automatically approved safe changes."

  request_additional_review_for_large_prs:
    if:
      - {{ files | length > 10 }}
    run:
      - action: set-required-approvals@v1
        args:
          approvals: 2

  notify_code_experts:
    if:
      - {{ files | extensions | includes('js') }}
    run:
      - action: add-comment@v1
        args:
          comment: "This PR contains JavaScript files. Please ensure a JavaScript expert reviews this PR."

  enforce_changelog_update:
    if:
      - {{ files | match(regex=r'/src/') | some }}
      - {{ not (files | includes('CHANGELOG.md')) }}
    run:
      - action: request-changes@v1
        args:
          message: "Please update the CHANGELOG.md file for changes in the src directory."
